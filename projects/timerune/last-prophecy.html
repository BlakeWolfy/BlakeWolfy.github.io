<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Last Prophecy | Timerune</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: black;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
}

#panel {
  width: 512px;
  max-width: 90%;
  height: auto;
  margin-top: 10vh; /* 10% da altura da tela */
  z-index: 1;
}

#vik {
  position: absolute;
  bottom: calc(100vh - (10vh + 318px) - 50px); /* ajusta automaticamente */
  width: 100px; /* metade do tamanho original */
  height: auto;
  z-index: 2;
}
</style>
</head>
<body>

<!-- Painel de Profecia -->
<img id="panel" src="../../assets/imagens/prophecy-panel.png" alt="Painel de Profecia">

<!-- Vik andando -->
<img id="vik" src="../../assets/imagens/timerune/dw-vikwalk1.png" alt="Vik">

<!-- Música -->
<audio id="bgm" src="../../assets/musics/a_lost_person.m4a" loop></audio>

<script>
const vik = document.getElementById("vik");
const bgm = document.getElementById("bgm");

// Inicia música no primeiro clique/toque
document.addEventListener("click", () => {
  if(bgm.paused){
    bgm.volume = 0.5;
    bgm.play().catch(()=>console.log("Clique para iniciar música"));
  }
});

// Sprites de caminhada (4 frames)
const walkFrames = [
  "../../assets/imagens/timerune/dw-vikwalk1.png",
  "../../assets/imagens/timerune/dw-vikwalk2.png",
  "../../assets/imagens/timerune/dw-vikwalk3.png",
  "../../assets/imagens/timerune/dw-vikwalk4.png"
];

let frameIndex = 0;
setInterval(()=>{
  vik.src = walkFrames[frameIndex];
  frameIndex = (frameIndex + 1) % walkFrames.length;
}, 200); // muda frame a cada 200ms (ajustável)

// Animação horizontal contínua
let pos = -200; // fora da tela à esquerda
let vw = window.innerWidth;

function moveVik(){
  pos += 2; // velocidade horizontal
  if(pos > vw){
    pos = -200; // volta à esquerda
  }
  vik.style.left = pos + "px";
  requestAnimationFrame(moveVik);
}
moveVik();

// Ajusta largura da tela ao redimensionar
window.addEventListener("resize", ()=>{
  vw = window.innerWidth;
});
</script>

</body>
</html>
